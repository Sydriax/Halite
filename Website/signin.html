<!DOCTYPE html>
<html>

<head>
	<title>Halite4</title>
	<link rel="stylesheet" type="text/css" href="index.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	
	<script type="text/javascript">
		$.ajax({
			url: "Backend/session", 
			async: false,
			success: function(result) {
				if(result != null) {
					window.location.replace("dashboard.html");
				}
			}
		});

		$(document).ready(function() {
			
			$("#submit").click(function() {
				var username = $("input:text[name=username]").val();
				var password = $("input:text[name=password]").val();

				$.ajax({
					url: "Backend/user", 
					async: false,
					method: "GET",
					data: {username: username, password: password},
					success: function(result){
						// Not signin
			       		if(result == null) {
			       			$("#message").text("That username/password combo is incorrect.");
			       		} else {
			       			$.ajax({
								url: "Backend/session", 
								async: false,
								method: "POST",
								data: {username: username, password: password}
						    });

			       			window.location.replace("dashboard.html");
			       		}
			    	}
			    });

			});
		});
	</script>
</head>

<body>
	<h1>Sign in</h1>

	<p id="message"></p>
	
	<input type="text" name="username" value="">
	<br>
	<input type="text" name="password" value="">
	<br>
	<button id="submit">Submit</button>
</body>

</html>
